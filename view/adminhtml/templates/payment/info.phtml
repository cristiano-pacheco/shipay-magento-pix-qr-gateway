<?php

/**
 * DISCLAIMER
 *
 * Do not edit this file if you want to update this module for future new versions.
 *
 * @category Shipay
 * @package Shipay_PixQrGateway
 * @copyright Copyright (c) 2021 Shipay
 * @author Shipay <ajuda@shipay.com.br>
 *
 * See LICENSE for license details.
 */

use Shipay\PixQrGateway\Gateway\Response\ResponseFieldsInterface;

/**
 * @var \Shipay\PixQrGateway\Block\PaymentInfo $block
 */
$specificInfo = $block->getSpecificInformation();
$paymentData = $block->getPaymentAdditionalInformation();
$walletLabel = $block->getWalletLabel();
?>
<?= $block->escapeHtml($block->getMethod()->getTitle()) ?>

<table class="data-table admin__table-secondary">
    <?php foreach ($specificInfo as $label => $value): ?>
        <tr>
            <th><?= $block->escapeHtml($label) ?>:</th>
            <td>
                <?= /* @noEscape */ nl2br($block->escapeHtml(implode("\n", $block->getValueAsArray($value, true)))) ?>
            </td>
        </tr>
    <?php endforeach; ?>
    <tr>
        <th><?= /* @noEscape */ __('Payment Type'); ?></th>
        <td>
            <?= /* @noEscape */ $walletLabel; ?>
        </td>
    </tr>
    <?php if ($block->isAcceptedPayment()): ?>
        <tr>
            <th scope="row">Status</th>
            <td>
                <?= /* @noEscape */__('Payment accept!') ?>
            </td>
        </tr>
    <?php endif; ?>
    <?php if ($block->isExpiredPayment()): ?>
        <tr>
            <th scope="row">Status</th>
            <td>
                <?= /* @noEscape */__('Payment expired!') ?>
            </td>
        </tr>
    <?php endif; ?>
    <?php if ($block->isPendingPayment()): ?>
        <tr class="show-on-web">
            <th scope="row" style="min-width: 110px;"><?= /* @noEscape */ __('QR Code') ?></th>
            <td>
                <img style="max-width: 240px; max-height: 240px;"
                     src="<?= /* @noEscape */ $paymentData[ResponseFieldsInterface::QR_CODE]; ?>" alt="QR Code"/>
            </td>
        </tr>
        <?php if ($block->isToShowPixCopyPasteButton()): ?>
            <tr class="show-on-mobile">
                <th scope="row" style="min-width: 110px;"><?= /* @noEscape */ __('Pix Copy Paste') ?></th>
                <td>
                    <p class="pix-text-order-view" style="width: 500px; word-wrap: break-word;">
                        <?= /* @noEscape */ trim($paymentData[ResponseFieldsInterface::QR_CODE_TEXT]); ?>
                    </p>
                </td>
            </tr>
            <tr class="pix-copy-paste-container" style="display: none;">
                <th scope="row">&nbsp</th>
                <td>
                    <button class="btn-pix-copy-paste"
                            data-clipboard-text="
                            <?= /* @noEscape */ trim($paymentData[ResponseFieldsInterface::QR_CODE_TEXT]); ?>"
                    >
                        <?= /* @noEscape */ __('Copy PIX');?>
                    </button>
                </td>
            </tr>
        <?php endif; ?>
        <?php if ($block->isToShowDeepLink()): ?>
            <tr class="show-on-mobile">
                <td>
                    <a href="<?= /* @noEscape */ $paymentData[ResponseFieldsInterface::DEEP_LINK]; ?>"
                       target="_blank">
                        <button><?= /* @noEscape */ __('Click here to pay'); ?></button>
                    </a>
                </td>
            </tr>
        <?php endif; ?>
    <?php endif; ?>
</table>

<?= $block->getChildHtml() ?>
